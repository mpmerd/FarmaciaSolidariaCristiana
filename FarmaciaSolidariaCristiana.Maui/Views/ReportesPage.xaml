<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:FarmaciaSolidariaCristiana.Maui.ViewModels"
             x:Class="FarmaciaSolidariaCristiana.Maui.Views.ReportesPage"
             x:DataType="viewmodels:ReportesViewModel"
             Title="{Binding Title}"
             BackgroundColor="{StaticResource BackgroundColor}">

    <ScrollView>
        <StackLayout Padding="20" Spacing="20">
            <!-- Header -->
            <Frame BackgroundColor="{StaticResource Primary}" 
                   CornerRadius="15" 
                   Padding="20"
                   HasShadow="True">
                <StackLayout>
                    <Label Text="ðŸ“Š Generador de Reportes" 
                           FontSize="22" 
                           FontAttributes="Bold"
                           TextColor="White"/>
                    <Label Text="Selecciona el tipo de reporte a generar" 
                           FontSize="14" 
                           TextColor="#B0D4FF"/>
                </StackLayout>
            </Frame>

            <!-- Date Range Picker -->
            <Frame BackgroundColor="White" CornerRadius="15" Padding="20" HasShadow="True">
                <StackLayout Spacing="15">
                    <Label Text="Rango de Fechas" 
                           FontSize="18" 
                           FontAttributes="Bold"
                           TextColor="{StaticResource Dark}"/>
                    
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
                        <StackLayout Grid.Column="0" Spacing="5">
                            <Label Text="Desde:" FontSize="14" TextColor="{StaticResource Gray600}"/>
                            <DatePicker Date="{Binding FechaInicio}"
                                        BackgroundColor="{StaticResource Gray100}"
                                        MinimumDate="2020-01-01"
                                        MaximumDate="{Binding FechaFin}"/>
                        </StackLayout>
                        
                        <StackLayout Grid.Column="1" Spacing="5">
                            <Label Text="Hasta:" FontSize="14" TextColor="{StaticResource Gray600}"/>
                            <DatePicker Date="{Binding FechaFin}"
                                        BackgroundColor="{StaticResource Gray100}"
                                        MinimumDate="{Binding FechaInicio}"/>
                        </StackLayout>
                    </Grid>
                </StackLayout>
            </Frame>

            <!-- Report Options -->
            <Label Text="Tipo de Reporte" 
                   FontSize="18" 
                   FontAttributes="Bold"
                   TextColor="{StaticResource Dark}"/>

            <!-- Turnos Report -->
            <Frame BackgroundColor="White" CornerRadius="15" Padding="0" HasShadow="True">
                <Frame.GestureRecognizers>
                    <TapGestureRecognizer Command="{Binding GenerateTurnosReportCommand}"/>
                </Frame.GestureRecognizers>
                <Grid ColumnDefinitions="Auto,*,Auto" Padding="15">
                    <Frame Grid.Column="0" 
                           WidthRequest="50" 
                           HeightRequest="50" 
                           CornerRadius="25"
                           BackgroundColor="#E3F2FD"
                           BorderColor="Transparent"
                           Padding="0">
                        <Label Text="ðŸ“…" FontSize="24" HorizontalOptions="Center" VerticalOptions="Center"/>
                    </Frame>
                    <StackLayout Grid.Column="1" VerticalOptions="Center" Padding="15,0">
                        <Label Text="Reporte de Turnos" FontSize="16" FontAttributes="Bold" TextColor="{StaticResource Dark}"/>
                        <Label Text="Historial de turnos y asistencias" FontSize="12" TextColor="{StaticResource Gray600}"/>
                    </StackLayout>
                    <Label Grid.Column="2" Text="â€º" FontSize="24" TextColor="{StaticResource Gray400}" VerticalOptions="Center"/>
                </Grid>
            </Frame>

            <!-- Medicamentos Report -->
            <Frame BackgroundColor="White" CornerRadius="15" Padding="0" HasShadow="True">
                <Frame.GestureRecognizers>
                    <TapGestureRecognizer Command="{Binding GenerateMedicamentosReportCommand}"/>
                </Frame.GestureRecognizers>
                <Grid ColumnDefinitions="Auto,*,Auto" Padding="15">
                    <Frame Grid.Column="0" 
                           WidthRequest="50" 
                           HeightRequest="50" 
                           CornerRadius="25"
                           BackgroundColor="#E8F5E9"
                           BorderColor="Transparent"
                           Padding="0">
                        <Label Text="ðŸ’Š" FontSize="24" HorizontalOptions="Center" VerticalOptions="Center"/>
                    </Frame>
                    <StackLayout Grid.Column="1" VerticalOptions="Center" Padding="15,0">
                        <Label Text="Inventario de Medicamentos" FontSize="16" FontAttributes="Bold" TextColor="{StaticResource Dark}"/>
                        <Label Text="Stock actual y movimientos" FontSize="12" TextColor="{StaticResource Gray600}"/>
                    </StackLayout>
                    <Label Grid.Column="2" Text="â€º" FontSize="24" TextColor="{StaticResource Gray400}" VerticalOptions="Center"/>
                </Grid>
            </Frame>

            <!-- Insumos Report -->
            <Frame BackgroundColor="White" CornerRadius="15" Padding="0" HasShadow="True">
                <Frame.GestureRecognizers>
                    <TapGestureRecognizer Command="{Binding GenerateInsumosReportCommand}"/>
                </Frame.GestureRecognizers>
                <Grid ColumnDefinitions="Auto,*,Auto" Padding="15">
                    <Frame Grid.Column="0" 
                           WidthRequest="50" 
                           HeightRequest="50" 
                           CornerRadius="25"
                           BackgroundColor="#FFF3E0"
                           BorderColor="Transparent"
                           Padding="0">
                        <Label Text="ðŸ“¦" FontSize="24" HorizontalOptions="Center" VerticalOptions="Center"/>
                    </Frame>
                    <StackLayout Grid.Column="1" VerticalOptions="Center" Padding="15,0">
                        <Label Text="Inventario de Insumos" FontSize="16" FontAttributes="Bold" TextColor="{StaticResource Dark}"/>
                        <Label Text="Stock actual de insumos" FontSize="12" TextColor="{StaticResource Gray600}"/>
                    </StackLayout>
                    <Label Grid.Column="2" Text="â€º" FontSize="24" TextColor="{StaticResource Gray400}" VerticalOptions="Center"/>
                </Grid>
            </Frame>

            <!-- Donaciones Report -->
            <Frame BackgroundColor="White" CornerRadius="15" Padding="0" HasShadow="True">
                <Frame.GestureRecognizers>
                    <TapGestureRecognizer Command="{Binding GenerateDonacionesReportCommand}"/>
                </Frame.GestureRecognizers>
                <Grid ColumnDefinitions="Auto,*,Auto" Padding="15">
                    <Frame Grid.Column="0" 
                           WidthRequest="50" 
                           HeightRequest="50" 
                           CornerRadius="25"
                           BackgroundColor="#FCE4EC"
                           BorderColor="Transparent"
                           Padding="0">
                        <Label Text="â¤ï¸" FontSize="24" HorizontalOptions="Center" VerticalOptions="Center"/>
                    </Frame>
                    <StackLayout Grid.Column="1" VerticalOptions="Center" Padding="15,0">
                        <Label Text="Reporte de Donaciones" FontSize="16" FontAttributes="Bold" TextColor="{StaticResource Dark}"/>
                        <Label Text="Historial de donaciones recibidas" FontSize="12" TextColor="{StaticResource Gray600}"/>
                    </StackLayout>
                    <Label Grid.Column="2" Text="â€º" FontSize="24" TextColor="{StaticResource Gray400}" VerticalOptions="Center"/>
                </Grid>
            </Frame>

            <!-- Entregas Report -->
            <Frame BackgroundColor="White" CornerRadius="15" Padding="0" HasShadow="True">
                <Frame.GestureRecognizers>
                    <TapGestureRecognizer Command="{Binding GenerateEntregasReportCommand}"/>
                </Frame.GestureRecognizers>
                <Grid ColumnDefinitions="Auto,*,Auto" Padding="15">
                    <Frame Grid.Column="0" 
                           WidthRequest="50" 
                           HeightRequest="50" 
                           CornerRadius="25"
                           BackgroundColor="#E0F7FA"
                           BorderColor="Transparent"
                           Padding="0">
                        <Label Text="ðŸšš" FontSize="24" HorizontalOptions="Center" VerticalOptions="Center"/>
                    </Frame>
                    <StackLayout Grid.Column="1" VerticalOptions="Center" Padding="15,0">
                        <Label Text="Reporte de Entregas" FontSize="16" FontAttributes="Bold" TextColor="{StaticResource Dark}"/>
                        <Label Text="Historial de entregas realizadas" FontSize="12" TextColor="{StaticResource Gray600}"/>
                    </StackLayout>
                    <Label Grid.Column="2" Text="â€º" FontSize="24" TextColor="{StaticResource Gray400}" VerticalOptions="Center"/>
                </Grid>
            </Frame>

            <!-- Loading -->
            <ActivityIndicator IsRunning="{Binding IsBusy}"
                               IsVisible="{Binding IsBusy}"
                               Color="{StaticResource Primary}"
                               HeightRequest="40"/>
        </StackLayout>
    </ScrollView>
</ContentPage>
